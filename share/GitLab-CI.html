<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GitLab CI | Lemon</title>
    <meta name="description" content="Just Do It">
    <link rel="stylesheet" href="/vitePress/assets/style.f9b218aa.css">
    <link rel="modulepreload" href="/vitePress/assets/app.bf7c4199.js">
    <link rel="modulepreload" href="/vitePress/assets/share_GitLab-CI.md.5e2bc10f.lean.js">
    
    <link rel="icon" href="/favicon.png">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-fbe1125a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b791bfda></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-b791bfda> Skip to content </a><!--]--><!----><header class="VPNav" data-v-fbe1125a data-v-b86ee43f><div class="VPNavBar has-sidebar" data-v-b86ee43f data-v-49014ac5><div class="container" data-v-49014ac5><div class="VPNavBarTitle has-sidebar" data-v-49014ac5 data-v-7218be3d><a class="title" href="/vitePress/" data-v-7218be3d><!--[--><!--]--><!--[--><img class="VPImage logo" src="/vitePress/logo.png" alt data-v-8242bdab><!--]--><!--[-->Lemon<!--]--><!--[--><!--]--></a></div><div class="content" data-v-49014ac5><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-49014ac5 data-v-2298b59b><span id="main-nav-aria-label" class="visually-hidden" data-v-2298b59b>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitePress/guide/" data-v-2298b59b data-v-db70b417 data-v-0ea16e3f><!--[-->指南<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2298b59b data-v-a69a5d75><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-a69a5d75><span class="text" data-v-a69a5d75><!----> 文档 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-a69a5d75><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-a69a5d75><div class="VPMenu" data-v-a69a5d75 data-v-b02a1e52><div class="items" data-v-b02a1e52><!--[--><!--[--><div class="VPMenuLink" data-v-b02a1e52 data-v-d6edfd55><a class="VPLink link" href="/vitePress/note/editor/" data-v-d6edfd55 data-v-0ea16e3f><!--[-->编辑器/IDE<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b02a1e52 data-v-d6edfd55><a class="VPLink link" href="/vitePress/note/frame/" data-v-d6edfd55 data-v-0ea16e3f><!--[-->前端技术栈<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b02a1e52 data-v-d6edfd55><a class="VPLink link" href="/vitePress/note/deploy/" data-v-d6edfd55 data-v-0ea16e3f><!--[-->项目部署<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b02a1e52 data-v-d6edfd55><a class="VPLink link" href="/vitePress/note/config/" data-v-d6edfd55 data-v-0ea16e3f><!--[-->环境配置<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b02a1e52 data-v-d6edfd55><a class="VPLink link" href="/vitePress/share/" data-v-d6edfd55 data-v-0ea16e3f><!--[-->交流分享<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-49014ac5 data-v-68bf1e66><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-68bf1e66 data-v-d6621f88 data-v-db13b24e><span class="check" data-v-db13b24e><span class="icon" data-v-db13b24e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-d6621f88><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-d6621f88><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-49014ac5 data-v-b1f1ce17 data-v-96c0f7eb><!--[--><a class="VPSocialLink" href="https://github.com/wangyanweiie/vitePress" target="_blank" rel="noopener" data-v-96c0f7eb data-v-b46e1875><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-49014ac5 data-v-ab6bed06 data-v-a69a5d75><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-a69a5d75><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-a69a5d75><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-a69a5d75><div class="VPMenu" data-v-a69a5d75 data-v-b02a1e52><!----><!--[--><!--[--><!----><div class="group" data-v-ab6bed06><div class="item appearance" data-v-ab6bed06><p class="label" data-v-ab6bed06>Appearance</p><div class="appearance-action" data-v-ab6bed06><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-ab6bed06 data-v-d6621f88 data-v-db13b24e><span class="check" data-v-db13b24e><span class="icon" data-v-db13b24e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-d6621f88><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-d6621f88><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-ab6bed06><div class="item social-links" data-v-ab6bed06><div class="VPSocialLinks social-links-list" data-v-ab6bed06 data-v-96c0f7eb><!--[--><a class="VPSocialLink" href="https://github.com/wangyanweiie/vitePress" target="_blank" rel="noopener" data-v-96c0f7eb data-v-b46e1875><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-49014ac5 data-v-1950cc59><span class="container" data-v-1950cc59><span class="top" data-v-1950cc59></span><span class="middle" data-v-1950cc59></span><span class="bottom" data-v-1950cc59></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-fbe1125a data-v-f4ab3784><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f4ab3784><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-f4ab3784><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-f4ab3784>Menu</span></button><a class="top-link" href="#" data-v-f4ab3784> Return to top </a></div><aside class="VPSidebar" data-v-fbe1125a data-v-0de8e7bb><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0de8e7bb><span class="visually-hidden" id="sidebar-aria-label" data-v-0de8e7bb> Sidebar Navigation </span><!--[--><div class="group" data-v-0de8e7bb><section class="VPSidebarGroup collapsible" data-v-0de8e7bb data-v-fa91bb59><div class="title" role="button" data-v-fa91bb59><h2 class="title-text" data-v-fa91bb59>交流分享</h2><div class="action" data-v-fa91bb59><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-fa91bb59><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-fa91bb59><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-fa91bb59><!--[--><!--[--><a class="VPLink link link" href="/vitePress/share/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF.html" style="padding-left:0px;" data-v-c0a3e0eb data-v-0ea16e3f><!--[--><span class="link-text" data-v-c0a3e0eb>事件循环</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/vitePress/share/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.html" style="padding-left:0px;" data-v-c0a3e0eb data-v-0ea16e3f><!--[--><span class="link-text" data-v-c0a3e0eb>文件上传</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/vitePress/share/GitLab-CI.html" style="padding-left:0px;" data-v-c0a3e0eb data-v-0ea16e3f><!--[--><span class="link-text" data-v-c0a3e0eb>GitLab-CI</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-fbe1125a data-v-64d5da78><div class="VPDoc has-sidebar has-aside" data-v-64d5da78 data-v-c5c71195><div class="container" data-v-c5c71195><div class="aside" data-v-c5c71195><div class="aside-curtain" data-v-c5c71195></div><div class="aside-container" data-v-c5c71195><div class="aside-content" data-v-c5c71195><div class="VPDocAside" data-v-c5c71195 data-v-80e2764e><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-80e2764e data-v-f0fbe923><div class="content" data-v-f0fbe923><div class="outline-marker" data-v-f0fbe923></div><div class="outline-title" data-v-f0fbe923>目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-f0fbe923><span class="visually-hidden" id="doc-outline-aria-label" data-v-f0fbe923> Table of Contents for current page </span><ul class="root" data-v-f0fbe923 data-v-fda118a5><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-80e2764e></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c5c71195><div class="content-container" data-v-c5c71195><!--[--><!--]--><main class="main" data-v-c5c71195><div style="position:relative;" class="vp-doc _vitePress_share_GitLab-CI" data-v-c5c71195><div><h1 id="gitlab-ci" tabindex="-1">GitLab CI <a class="header-anchor" href="#gitlab-ci" aria-hidden="true">#</a></h1><h2 id="一、知识拓展" tabindex="-1">一、知识拓展 <a class="header-anchor" href="#一、知识拓展" aria-hidden="true">#</a></h2><p>要了解 GitLab-CI 与 GitLab-Runner，我们得先了解持续集成是什么？</p><ul><li><p>持续集成是一种软件开发实践，即团队开发成员经常集成他们的工作，通常每个成员每天至少集成一次，也就意味着每天可能会发生多次集成。每次集成都通过自动化的构建（包括编译，发布，自动化测试)来验证，从而尽快地发现集成错误。许多团队发现这个过程可以大大减少集成的问题，让团队能够更快的开发内聚的软件。</p></li><li><p>看完这段话，估计还是有点懵。怎么理解呢？我是这样理解的：软件集成是软件开发过程中的一个环节，这个环节的工作一般会包括以下流程：<code>合并代码----&gt;安装依赖----&gt;编译----&gt;测试----&gt;发布</code>。软件集成的工作一般会比较细碎繁琐，为了不影响开发效率，以前软件集成这个环节一般不会经常进行或者只会等到项目后期再进行。但是有些问题，如果等到后期才发现，解决问题的代价很大，有可能导致项目延期或者失败。因此，为了尽早发现软件集成错误，鼓励团队成员应该经常集成他们的工作，通常每个成员每天应该至少集成一次。这就是所说的持续集成。所以说，持续集成是一种软件开发实践。</p></li></ul><p>软件集成的工作细碎繁琐，以前是由人工完成的。但是现在鼓励持续集成，那岂不是要累死人，还影响开发效率。所以，应该考虑将软件集成这个工作自动化，这就出现了所谓的持续集成系统。</p><h2 id="二、gitlab-ci" tabindex="-1">二、GitLab-CI <a class="header-anchor" href="#二、gitlab-ci" aria-hidden="true">#</a></h2><h3 id="_1-介绍" tabindex="-1">1. 介绍 <a class="header-anchor" href="#_1-介绍" aria-hidden="true">#</a></h3><p>GitLab-CI 就是一套配合 gitlab 使用的持续集成系统（当然，还有其它的持续集成系统，同样可以配合 gitlab 使用，比如 Jenkins）。而且 gitlab 8.0 以后的版本是默认集成了 GitLab-CI，并且默认启用的。</p><p><img src="/vitePress/assets/gitlabCI.d8d52ad9.png" alt="gitlab"></p><h3 id="_2-如何使用" tabindex="-1">2. 如何使用 <a class="header-anchor" href="#_2-如何使用" aria-hidden="true">#</a></h3><ul><li>需要先在仓库根目录创建一个 <code>gitlab-ci.yml</code> 的文件，它用来指定持续集成需要运行的环境，以及要执行的脚本。</li><li>还需要设置一个 <code>GitLab-Runner</code>，当有代码push变更的时候，它会自动开始 Pipeline，并在 gitlab 上显示持续集成的结果。</li></ul><h2 id="三、gitlab-runner" tabindex="-1">三、<a href="https://docs.gitlab.com/runner/" target="_blank" rel="noreferrer">GitLab-Runner</a> <a class="header-anchor" href="#三、gitlab-runner" aria-hidden="true">#</a></h2><h3 id="_1-介绍-1" tabindex="-1">1. 介绍 <a class="header-anchor" href="#_1-介绍-1" aria-hidden="true">#</a></h3><p>GitLab-Runner 是配合 GitLab-CI 进行使用的。<br> 一般地，GitLab 里面的每一个项目都会定义一个属于这个项目的软件集成脚本 <code>(.gitlab-ci.yml脚本文件)</code>，用来自动化地完成一些软件集成工作。当这个项目的仓库代码发生变动时，比如有人 push 了代码，GitLab 就会将这个变动通知 GitLab-CI。这时 GitLab-CI 会找出与这个项目相关联的 Runner，并通知这些 Runner 把代码更新到本地并执行预定义好的执行脚本。所以，GitLab-Runner就是一个用来执行软件集成脚本的东西 <code>(.gitlab-ci.yml脚本文件)</code>。<br> 你可以想象一下：Runner 就像一个个的工人，而 GitLab-CI 就是这些工人的一个管理中心，所有工人都要在 GitLab-CI 里面登记注册，并且表明自己是为哪个工程服务的。当相应的工程发生变化时，GitLab-CI就会通知相应的工人执行软件集成脚本。</p><h3 id="_2-执行流程" tabindex="-1">2. 执行流程 <a class="header-anchor" href="#_2-执行流程" aria-hidden="true">#</a></h3><ul><li>本地代码改动</li><li>变动代码推送到 gitlab 上</li><li>gitlab 将这个变动通知 GitLab-CI</li><li>GitLab-CI 找出这个工程相关联的 GitLab-Runner</li><li>GitLab-Runner 把代码更新到本地</li><li>根据预设置的条件配置好环境</li><li>根据预定义的脚本(一般是.gitlab-ci.yml)执行</li><li>把执行结果通知给 gitlab</li><li>gitlab 显示最终执行的结果</li></ul><p><img src="/vitePress/assets/gitlab2.9cddf98f.webp" alt="gitlab2"></p><h3 id="_3-runner-类型" tabindex="-1"><a href="https://docs.gitlab.com/ee/ci/runners/runners_scope.html" target="_blank" rel="noreferrer">3. Runner 类型</a> <a class="header-anchor" href="#_3-runner-类型" aria-hidden="true">#</a></h3><h4 id="shared-runners" tabindex="-1">Shared Runners <a class="header-anchor" href="#shared-runners" aria-hidden="true">#</a></h4><p>所有的组和项目都能够使用，但是只有系统管理员能够创建。通过 <code>项目 -&gt; Setting -&gt; CI/CD</code>，点击 <code>Runner</code> 右侧的 <code>expend</code> 按钮，并且点击 <code>Show runner installation instructions</code>。</p><h4 id="group-runners" tabindex="-1">Group Runners <a class="header-anchor" href="#group-runners" aria-hidden="true">#</a></h4><p>可以查看和管理在一个组以及这个组中的子组和项目中所有的 Runners。也可以在你自己管理的 gitlab 中进行上面的操作，但是在你在这个组中的觉得必须是最大的。</p><ul><li>安装 GitLab-Runner。</li><li>进入你想要 Runner 工作的组。</li><li>在左菜单栏选择 <code>CI/CD -&gt; Runners</code>。</li><li>复制 <code>URL</code> 和 <code>token</code>。</li><li>注册 Runner。</li></ul><h4 id="specific-runners" tabindex="-1">Specific Runners <a class="header-anchor" href="#specific-runners" aria-hidden="true">#</a></h4><p>适用于具体的某一个项目。</p><blockquote><p>前提条件：你必须是这个项目的维护者。<br> 警告：Specific Runner 不能够适用于通过 fork 的项目，因为他不会自动的进行 Runner。</p></blockquote><ul><li>安装 GitLab-Runner。</li><li>选择你要使用 Runner 的项目。</li><li>在做侧边栏，选择 <code>Setting -&gt; CI/CD</code> 。</li><li>在 <code>Runner</code> 右侧点击 <code>Expand</code>。</li><li>在 <code>Specific Runner</code> 选项区域，复制 <code>URL</code> 和 <code>token</code>。</li><li>注册 Runner，注册完成后这个项目就可以使用这个 Runner 了。</li></ul><h3 id="_4-runner-安装与配置" tabindex="-1">4. Runner 安装与配置 <a class="header-anchor" href="#_4-runner-安装与配置" aria-hidden="true">#</a></h3><h4 id="下载系统对应的-runner" tabindex="-1">下载系统对应的 Runner <a class="header-anchor" href="#下载系统对应的-runner" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#676E95;"># Linux x86-64</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo wget -O /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Linux x86</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo wget -O /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-386</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># Linux arm</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo wget -O /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-arm</span></span>
<span class="line"></span></code></pre></div><h4 id="给-runner-添加执行权限" tabindex="-1">给 Runner 添加执行权限 <a class="header-anchor" href="#给-runner-添加执行权限" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo chmod +x /usr/local/bin/gitlab-runner</span></span>
<span class="line"></span></code></pre></div><h4 id="创建一个用户" tabindex="-1">创建一个用户 <a class="header-anchor" href="#创建一个用户" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo useradd --comment GitLab Runner --create-home gitlab-runner --shell /bin/bash</span></span>
<span class="line"></span></code></pre></div><h4 id="安装并启动服务" tabindex="-1">安装并启动服务 <a class="header-anchor" href="#安装并启动服务" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#676E95;"># 安装</span></span>
<span class="line"><span style="color:#A6ACCD;">gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 启动</span></span>
<span class="line"><span style="color:#A6ACCD;">gitlab-runner start</span></span>
<span class="line"></span></code></pre></div><h4 id="注册-runner" tabindex="-1">注册 Runner <a class="header-anchor" href="#注册-runner" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">Enter the GitLab instance URL </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">for example, https://gitlab.com/</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#676E95;"># 输入服务器GitLab的地址</span></span>
<span class="line"><span style="color:#A6ACCD;">Enter the registration token:</span></span>
<span class="line"><span style="color:#676E95;"># 输入项目下的token</span></span>
<span class="line"><span style="color:#A6ACCD;">Enter a description </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> the runner:</span></span>
<span class="line"><span style="color:#676E95;"># 输入项目的描述</span></span>
<span class="line"><span style="color:#A6ACCD;">Enter tags </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> the runner </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">comma-separated</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#676E95;"># 输入项目的tags（在.gitlab-ci.yml上需要用到）</span></span>
<span class="line"><span style="color:#A6ACCD;">Enter optional maintenance note </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> the runner:</span></span>
<span class="line"><span style="color:#676E95;"># 输入注意事项</span></span>
<span class="line"><span style="color:#A6ACCD;">Enter an executor: docker, docker-ssh, parallels, ssh, virtualbox, docker+machine, custom, shell, docker-ssh+machine, kubernetes:</span></span>
<span class="line"><span style="color:#676E95;"># 选择以什么方式运行(咱们用shell)</span></span>
<span class="line"></span></code></pre></div><p>运行完之后就会出现 <code>Runner registered successfully...</code>，<br> 并且在 gitlab 上打开所对应的项目的 Runner 界面，就会出现已经注册了的信息，如下图。</p><p><img src="/vitePress/assets/config.4dd171a8.jpg" alt="config"></p><p><em><code>注：</code> 绿的小圆点就表示已经是激活成功了，如果注册的信息是黑色的感叹号，那就需要进行激活。可以执行下面的命令：</em></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">gitlab-runner verify</span></span>
<span class="line"><span style="color:#A6ACCD;">gitlab-runner restart</span></span>
<span class="line"></span></code></pre></div><h2 id="四、运行机制" tabindex="-1">四、运行机制 <a class="header-anchor" href="#四、运行机制" aria-hidden="true">#</a></h2><ul><li>通过在项目根目录下配置 <code>.gitlab-ci.yml</code> 文件，可以控制 CI 流程的不同阶段；例如 install/检查/编译/部署服务器，gitlab 平台会扫描 .gitlab-ci.yml 文件，并据此处理 CI 流程。</li><li>CI 流程在每次团队成员 push/merge 后之后触发。每当你 push/merge 一次，GitLab-CI 都会检查项目下有没有 .gitlab-ci.yml 文件；如果有，它会执行你在里面编写的脚本，并完整地走一遍从 <code>intall =&gt;（eslint检查=&gt;）编译 =&gt;部署服务器</code> 流程。</li><li>GitLab-CI 提供了指定 CI 运行平台的机制，它提供了一个叫 GitLab-Runner 的软件，只要在对应的平台(机器或 docker)上下载并运行这个命令行软件，并输入从 gitlab 交互界面获取的 token，就可以把当前机器和对应的 GitLab-CI 流程绑定，即每次跑 CI 都在这个平台上进行。</li><li>GitLab-CI 的所有流程都是可视化的，每个流程节点的状态可以在 gitlab 的交互界面上看到，包括执行成功或失败。因为它的执行看上去就和多节管道一样，所以我们通常用 <code>pipeLine</code> 来称呼它。</li><li>不同 push/merge 所触发的 CI 流程不会互相影响。</li></ul><h2 id="五、设计理念" tabindex="-1">五、设计理念 <a class="header-anchor" href="#五、设计理念" aria-hidden="true">#</a></h2><h3 id="_1-pipeline-job" tabindex="-1">1. Pipeline &amp; Job <a class="header-anchor" href="#_1-pipeline-job" aria-hidden="true">#</a></h3><p>Pipeline 是 gitlab 根据项目的 .gitlab-ci.yml 文件执行的流程，它由许多个任务节点组成, 而这些 Pipeline 上的每一个任务节点，都是一个独立的Job。<br> 每个 Job 都会配置一个 stage 属性，来表示这个 Job 所处的阶段。</p><h3 id="_2-yml文件的基本语法规则" tabindex="-1">2. YML文件的基本语法规则 <a class="header-anchor" href="#_2-yml文件的基本语法规则" aria-hidden="true">#</a></h3><p>CI 流程的运行控制，决定于项目根目录下编写的配置文件 <code>.gitlab-ci.yml</code>，所以，我们需要掌握 YML 的基本语法规则。</p><h4 id="简单的yml文件配置" tabindex="-1">简单的YML文件配置 <a class="header-anchor" href="#简单的yml文件配置" aria-hidden="true">#</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">install-job</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># 注释</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">tags</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sss</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm install</span></span>
<span class="line"></span></code></pre></div><p><em><code>注：</code>可以看出：YML通过缩进组织层级，YML里允许通过#符号编写注释</em></p><h4 id="基本结构上-yml-与-json-类似" tabindex="-1">基本结构上 YML 与 JSON 类似 <a class="header-anchor" href="#基本结构上-yml-与-json-类似" aria-hidden="true">#</a></h4><p>JSON 是由对象，数组，以及对象和数组的嵌套结构组成的；<br> YML 也是由对象，数组，以及对象和数组的嵌套结构组成的。</p><ul><li>YML中的数组写法：</li></ul><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#676E95;"># 数组写法</span></span>
<span class="line"><span style="color:#F07178;">colors</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">red</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">blue</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yellow</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 对象写法</span></span>
<span class="line"><span style="color:#F07178;">people</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zs</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 数组和对象之间的嵌套</span></span>
<span class="line"><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e</span></span>
<span class="line"></span></code></pre></div><ul><li>相当于JSON中的</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#676E95;">// 数组写法</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">color</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">blue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yellow</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 对象写法</span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">people</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">zs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">age</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span><span style="color:#89DDFF;">}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 数组和对象之间的嵌套</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">b</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="yml-文件中的配置关键字" tabindex="-1">YML 文件中的配置关键字 <a class="header-anchor" href="#yml-文件中的配置关键字" aria-hidden="true">#</a></h3><p>在了解了YML文件的语法格式后，接下来需要了解的就是 GitLab-CI 独特的配置关键字，这些关键字将在 .gitlab-ci.yml 中使用，并用来控制一个 Pipeline 具体的运作过程。</p><h4 id="常用配置关键字" tabindex="-1">常用配置关键字 <a class="header-anchor" href="#常用配置关键字" aria-hidden="true">#</a></h4><p><code>stages</code> <code>stage</code> <code>script</code> <code>tags</code></p><h4 id="stages" tabindex="-1">stages <a class="header-anchor" href="#stages" aria-hidden="true">#</a></h4><p>stages 定义在 YML 文件的最外层，它的值是一个数组，用于定义一个 Pipeline 不同的流程节点。</p><ul><li>例如定义如下</li></ul><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">stages</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install_deps</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build_prod</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">deploy_prod</span></span>
<span class="line"></span></code></pre></div><ul><li>则在 gitlab 交互界面中能够看到如下展示</li></ul><p><img src="/vitePress/assets/stages.0b7b287a.jpg" alt="stages"></p><h4 id="stage" tabindex="-1">stage <a class="header-anchor" href="#stage" aria-hidden="true">#</a></h4><p>上面说过：Job 是 Pipeline 的任务节点，它构成了 Pipeline 的基本单元。</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">install_deps_job</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install_deps</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">echo &#39;模拟安装构建依赖阶段&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">tags</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build_test</span></span>
<span class="line"></span></code></pre></div><ul><li>stage 是一个字符串，且是 stages 数组的一个子项，表示的是当前的 Pipeline 节点。当前 stage 的执行情况能在交互面板上展现：<code>正在执行是蓝色</code> <code>尚未执行是灰色</code> <code>执行成功是绿色</code> <code>执行失败是红色</code>。</li></ul><p><img src="/vitePress/assets/stage1.02e2d0ab.jpg" alt="stage"><img src="/vitePress/assets/stage2.48c3888e.jpg" alt="stage"></p><ul><li><p>script 是当前 Pipeline 节点运行的 shell 脚本（以项目根目录为上下文执行）。这个script 是我们控制 CI 流程的核心，我们所有的工作：从安装，编译到部署都是通过 script 中定义的 shell 脚本来完成的。如果脚本执行成功，Pipeline 就会进入下一个 Job 节点，如果执行失败那么 Pipeline 就会终止。</p></li><li><p>tags 是当前 Job 的标记，这个tags关键字是很重要，因为 gitlab 的 Runner 会通过 tags 去判断能否执行当前这个 Job。</p></li></ul><p>例如：我们在 gitlab 的面板中能看到当前激活的 Runner 的信息：<code>Gitlab项目首页=&gt; setting =&gt; CI/CD =&gt; Runners =&gt; Expand</code>。</p><p><img src="/vitePress/assets/tags.484a9ade.jpg" alt="tags"></p><p><em><code>注：</code>上面的这个 <code>build_test</code> 就是当前 Runner 的 tags。这意味着，这个 Runner 只会执行 tag 为 build_test 的 Job；如果一个 Job 没有 tag 或者 tag 不是 build_test，那么即使这个 Runner 是激活且空闲的，也不会去执行。</em></p><h2 id="六、自动化部署优点" tabindex="-1">六、自动化部署优点 <a class="header-anchor" href="#六、自动化部署优点" aria-hidden="true">#</a></h2><h3 id="_1-提高前端的开发效率和开发测试之间的协调效率" tabindex="-1">1. 提高前端的开发效率和开发测试之间的协调效率 <a class="header-anchor" href="#_1-提高前端的开发效率和开发测试之间的协调效率" aria-hidden="true">#</a></h3><ul><li><p>如果按照传统的流程，在项目上线前的测试阶段，前端同学修复 bug 之后，要手动把代码部署之后。才能通知测试同学在测试环境进行测试。这会造成几个问题：本身手动部署服务的工作是比较繁琐的，占用了开发时间。同时开发-测试之间的环节的耦合问题，则会增加团队沟通成本。</p></li><li><p>通过GitLab-CI，前端开发在提交代码之后就不用管了，CI 流程会自动部署到测试或集成环境的服务器。很大程度上节约了开发的时间。同时，因为开发和测试人员可以共用 gitlab 里的 Pipeline 界面, 测试同学能够随时把握代码部署的情况，同时还可以通过交互界面手动启动 Pipeline，自己去部署测试，从而节约和开发之间的沟通时间。</p></li></ul><h3 id="_2-从更细的粒度把握代码质量" tabindex="-1">2. 从更细的粒度把握代码质量 <a class="header-anchor" href="#_2-从更细的粒度把握代码质量" aria-hidden="true">#</a></h3><ul><li>我们可以把 eslint 或其他的代码检查加到 Pipeline 流程中，每当团队成员提交和合并一次，Pipeline 都会触发一次并对代码做一次全面检测，这样就从一个更细的粒度上控制代码质量了。</li></ul></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-c5c71195 data-v-24bf600a><div class="edit-info" data-v-24bf600a><div class="edit-link" data-v-24bf600a><a class="VPLink link edit-link-button" href="https://github.com/wangyanweiie/vitePress" target="_blank" rel="noreferrer" data-v-24bf600a data-v-0ea16e3f><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-24bf600a><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-24bf600a><div class="pager" data-v-24bf600a><a class="pager-link prev" href="/vitePress/share/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.html" data-v-24bf600a><span class="desc" data-v-24bf600a>上一篇</span><span class="title" data-v-24bf600a>文件上传</span></a></div><div class="has-prev pager" data-v-24bf600a><!----></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-fbe1125a data-v-75292fef><div class="container" data-v-75292fef><!----><p class="copyright" data-v-75292fef>Copyright © 2022 wangyanwei</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"guide_index.md\":\"0ab90b93\",\"index.md\":\"b5ab18a6\",\"note_config_zebra蓝牙配置.md\":\"f57fdaa2\",\"note_config_index.md\":\"736fa7aa\",\"note_deploy_app打包.md\":\"90654220\",\"note_deploy_pc项目部署.md\":\"14a82741\",\"note_deploy_verdaccio.md\":\"4bf6f60b\",\"note_deploy_vitepress.md\":\"0baac5f6\",\"note_deploy_index.md\":\"4680e5ac\",\"note_editor_vscode.md\":\"76f6fe43\",\"note_editor_index.md\":\"75e56c41\",\"note_frame_element.md\":\"4c82850f\",\"note_frame_git.md\":\"170cebc7\",\"note_frame_javascript.md\":\"e227b654\",\"note_frame_typescript.md\":\"6952942e\",\"note_frame_uni-app.md\":\"ce46da53\",\"note_frame_vue.md\":\"2d491b71\",\"note_frame_index.md\":\"6682fd69\",\"share_gitlab-ci.md\":\"5e2bc10f\",\"share_index.md\":\"3c822970\",\"share_事件循环.md\":\"74f6cdf1\",\"share_文件上传.md\":\"a004cb05\"}")</script>
    <script type="module" async src="/vitePress/assets/app.bf7c4199.js"></script>
    
  </body>
</html>